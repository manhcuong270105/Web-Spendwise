<!DOCTYPE html>
<html class="light" lang="vi">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>SpendWise - Hồ sơ người dùng</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
        rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { "primary": "#2E7D32", "background-light": "#F7F9FC", "background-dark": "#102216" },
                    fontFamily: { "display": ["Manrope", "sans-serif"] },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
    </style>
</head>

<body class="font-display bg-background-light dark:bg-background-dark text-gray-900 dark:text-white">
    <div class="relative flex h-auto min-h-screen w-full flex-col">
        <div class="layout-container flex h-full grow flex-col">
            <main class="px-4 sm:px-6 lg:px-8 flex flex-1 justify-center py-5 sm:py-10">
                <div class="layout-content-container w-full max-w-6xl">
                    <div class="mb-4">
                        <a href="/tongquan.html" class="flex items-center gap-2 text-gray-500 hover:text-primary">
                            <span class="material-symbols-outlined">arrow_back</span> Quay lại Tổng quan
                        </a>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                        <aside class="lg:col-span-1">
                            <div
                                class="flex flex-col gap-6 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
                                <div class="flex flex-col items-center gap-4">
                                    <div
                                        class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-24 bg-gray-300 flex items-center justify-center">
                                        <span class="material-symbols-outlined text-4xl text-gray-600">person</span>
                                    </div>
                                    <div class="text-center">
                                        <h1 class="text-lg font-bold" id="display-fullname">...</h1>
                                        <p class="text-sm text-gray-500" id="display-username">...</p>
                                    </div>
                                </div>
                                <div class="flex flex-col gap-1">
                                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary/10 text-primary"
                                        href="#">
                                        <span class="material-symbols-outlined">person</span>
                                        <p class="text-sm font-semibold">Thông tin cá nhân</p>
                                    </a>
                                    <button onclick="logout()"
                                        class="flex w-full items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-red-50 text-red-600 transition-colors">
                                        <span class="material-symbols-outlined">logout</span>
                                        <p class="text-sm font-medium">Đăng xuất</p>
                                    </button>
                                </div>
                            </div>
                        </aside>

                        <div class="lg:col-span-3">
                            <div
                                class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700">
                                <form class="flex flex-col gap-8 p-6 sm:p-8" id="profile-form">
                                    <section>
                                        <h2
                                            class="text-2xl font-bold pb-6 border-b border-gray-200 dark:border-gray-700">
                                            Thông tin cá nhân</h2>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-6">
                                            <label class="flex flex-col">
                                                <p class="text-sm font-medium pb-2">Họ và tên</p>
                                                <input id="input-fullname"
                                                    class="form-input rounded-lg border-gray-300 h-12 px-4"
                                                    type="text" />
                                            </label>
                                            <label class="flex flex-col">
                                                <p class="text-sm font-medium pb-2">Username</p>
                                                <input id="input-username"
                                                    class="form-input rounded-lg border-gray-300 h-12 px-4 bg-gray-100"
                                                    readonly />
                                            </label>
                                        </div>
                                    </section>

                                    <div class="flex justify-end items-center gap-4 pt-4">
                                        <button
                                            class="px-6 py-2.5 rounded-lg text-sm font-semibold text-white bg-primary hover:bg-primary/90"
                                            type="submit">Lưu thay đổi</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // 1. Load User Info
        const userStr = localStorage.getItem('user');
        if (!userStr) window.location.href = '/dangnhap.html';
        const user = JSON.parse(userStr);

        document.getElementById('display-fullname').innerText = user.fullName || "Người dùng";
        document.getElementById('display-username').innerText = user.username;

        document.getElementById('input-fullname').value = user.fullName || "";
        document.getElementById('input-username').value = user.username;

        // 2. Logout Function
        function logout() {
            if (confirm("Bạn có chắc muốn đăng xuất?")) {
                localStorage.removeItem('user');
                window.location.href = '/dangnhap.html';
            }
        }

        // 3. Fake Update (Do chưa có API update)
        document.getElementById('profile-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const newName = document.getElementById('input-fullname').value;
            user.fullName = newName;
            localStorage.setItem('user', JSON.stringify(user));
            alert("Đã cập nhật thông tin (Local)!");
            location.reload();
        });
    </script>
</body>

</html>